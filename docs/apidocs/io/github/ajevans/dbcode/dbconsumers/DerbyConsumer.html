<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Mon Mar 01 02:25:36 GMT 2021 -->
<title>DerbyConsumer (dbexamples 1.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-03-01">
<meta name="description" content="declaration: package: io.github.ajevans.dbcode.dbconsumers, class: DerbyConsumer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":42,"i12":10,"i13":42,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/DerbyConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.github.ajevans.dbcode.dbconsumers</a></div>
<h1 title="Class DerbyConsumer" class="title">Class DerbyConsumer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.github.ajevans.dbcode.dbconsumers.DerbyConsumer</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
</dl>
<hr>
<pre>public class <span class="type-name-label">DerbyConsumer</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></pre>
<div class="block">Class for connecting to and manipulating a Derby database.
 <p>
 Derby is an Open Source Apache Software Foundation database. It runs without 
 installation, and has a small footprint, making it a good choice for bundling 
 with applications. For more information see the 
 <a href="https://db.apache.org/derby/">Derby website</a>.
 <p>
 This class works with an <code>IDataset</code> (e.g. directory) containing one  
 or more <code>IRecordHolders</code> (e.g. files) containing 
 <code>IRecords</code> (e.g. rows) of values. It writes these to a 
 store (in this case a database) as record stores (tables), along with 
 an appropriate set of metadata tables.
 <p>
 <code>IReportingListener</code> objects may be registered with objects of 
 this class to receive suitable progress reporting and messaging. In general, 
 exceptions not dealt with internally are re-thrown for calling objects to 
 deal with. Messages are user-friendly. 
 <p>
 If developers have a specific database and set of table names  
 they'd like to use, they should first call <code>setStore</code> 
 and <code>setRecordStoreNames</code>. If these are missing when 
 <code>initialise</code> is finally called, <code>initialise</code> 
 will build a directory in the user's space (called after 
 <code>defaultDatabaseDirectory</code> in <code>application.properties</code>) 
 within which will be a database named after the dataset or 
 <code>DEFAULT</code> and tables named after the record holders or 
 <code>DEFAULTx</code> where <code>x</code> is an integer.
 <p>
 Either way, all developers should call <code>initialise</code> with 
 a dataset that at least has the fields and fieldtypes in it. This will 
 build the database structures with headers and set up progress monitoring. 
 <p>
 They can then get data written to the database by either calling 
 <code>bulkLoad</code> with a complete dataset object or 
 <code>load</code> with a collection of records. 
 <p>
 Note that because instance variables will hold a wide variety of information 
 on pervious writes, it is essential that for each new set of files / dataset 
 <strong>a new instance of this class is used</strong>.</div>
<dl class="notes">
<dt>Author:</dt>
<dd><a href="https://ajevans.github.io/">Andy Evans</a></dd>
<dt>Version: 1.0 01 Mar 2021</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>private int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#chunkRecordsBy">chunkRecordsBy</a></span></code></th>
<td class="col-last">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">See <code>load(IDataset dataset)</code> docs for details of 
 deprecation.</div>
</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#connection">connection</a></span></code></th>
<td class="col-last">
<div class="block">Connection for SQL requests.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#CREATE_SMT">CREATE_SMT</a></span></code></th>
<td class="col-last">
<div class="block">Constant for sql statement running.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#debug">debug</a></span></code></th>
<td class="col-last">
<div class="block">Debugging flag, set by System variable passed in <code>-Ddebug=true</code> 
 rather than setting here / with accessor.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#DEF_DB_DIR">DEF_DB_DIR</a></span></code></th>
<td class="col-last">
<div class="block">Default directory to create within store.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#DEF_FILE_DIR">DEF_FILE_DIR</a></span></code></th>
<td class="col-last">
<div class="block">Default directory for temp files.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#INSERT_SMT">INSERT_SMT</a></span></code></th>
<td class="col-last">
<div class="block">Constant for sql statement running.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#METADATA_TABLE">METADATA_TABLE</a></span></code></th>
<td class="col-last">
<div class="block">Constant proveLoaded.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#NORMAL_TABLE">NORMAL_TABLE</a></span></code></th>
<td class="col-last">
<div class="block">Constant proveLoaded.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#progress">progress</a></span></code></th>
<td class="col-last">
<div class="block">Used for progress monitoring.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#recordStoreNames">recordStoreNames</a></span></code></th>
<td class="col-last">
<div class="block">Record store (table) names used.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../utilities/IReportingListener.html" title="interface in io.github.ajevans.dbcode.utilities">IReportingListener</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#reportingListeners">reportingListeners</a></span></code></th>
<td class="col-last">
<div class="block">Listeners interested in updates on progress.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#SANITISE_NAME">SANITISE_NAME</a></span></code></th>
<td class="col-last">
<div class="block">Constant for database object name sanitisation.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#SANITISE_VIGOROUS">SANITISE_VIGOROUS</a></span></code></th>
<td class="col-last">
<div class="block">Constant for aggresive sanitisation.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>private int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#SANITISE_WEAK">SANITISE_WEAK</a></span></code></th>
<td class="col-last">
<div class="block">Constant for weak sanitisation to remove a few problematic chars.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>private <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#store">store</a></span></code></th>
<td class="col-last">
<div class="block">Path to database used.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E()">DerbyConsumer</a></span>()</code></th>
<td class="col-last">
<div class="block">Default constructor.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t6" class="table-tab" onclick="show(32);">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#addReportingListener(io.github.ajevans.dbcode.utilities.IReportingListener)">addReportingListener</a></span>&#8203;(<a href="../utilities/IReportingListener.html" title="interface in io.github.ajevans.dbcode.utilities">IReportingListener</a>&nbsp;reportingListener)</code></th>
<td class="col-last">
<div class="block">For objects wishing to get progress reports on data reading.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#buildMetadataTable(io.github.ajevans.dbcode.data.structures.IMetadata,java.lang.String)">buildMetadataTable</a></span>&#8203;(<a href="../data/structures/IMetadata.html" title="interface in io.github.ajevans.dbcode.data.structures">IMetadata</a>&nbsp;metadata,
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;metadataTableName)</code></th>
<td class="col-last">
<div class="block">Sets up a metadata table for each table.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#buildTable(io.github.ajevans.dbcode.data.structures.IDataset,int)">buildTable</a></span>&#8203;(<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset,
int&nbsp;index)</code></th>
<td class="col-last">
<div class="block">Sets up the relevant database table.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#bulkLoad(io.github.ajevans.dbcode.data.structures.IDataset)">bulkLoad</a></span>&#8203;(<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</code></th>
<td class="col-last">
<div class="block">This method bulk-loads a whole dataset into the database the quickest 
 (but memory hungry) way possible - via a CSV file.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#connectStore()">connectStore</a></span>()</code></th>
<td class="col-last">
<div class="block">Connects to current store / database.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#disconnectStore()">disconnectStore</a></span>()</code></th>
<td class="col-last">
<div class="block">Disconnects from current store / database and garbage collects.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#findTitle(io.github.ajevans.dbcode.data.structures.IMetadata)">findTitle</a></span>&#8203;(<a href="../data/structures/IMetadata.html" title="interface in io.github.ajevans.dbcode.data.structures">IMetadata</a>&nbsp;metadata)</code></th>
<td class="col-last">
<div class="block">Finds the title category in an unknown IMetadata object.</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#gapFillLocalisedGUIText()">gapFillLocalisedGUIText</a></span>()</code></th>
<td class="col-last">
<div class="block">Sets the defaults for warnings and exceptions in English if an appropriate 
 language properties file is missing.</div>
</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getRecordStoreNames()">getRecordStoreNames</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the record store names.</div>
</td>
</tr>
<tr class="row-color" id="i9">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getStore()">getStore</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the location for the store / database.</div>
</td>
</tr>
<tr class="alt-color" id="i10">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#initialise(io.github.ajevans.dbcode.data.structures.IDataset)">initialise</a></span>&#8203;(<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</code></th>
<td class="col-last">
<div class="block">Sets up the data store (database and tables).</div>
</td>
</tr>
<tr class="row-color" id="i11">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#load(io.github.ajevans.dbcode.data.structures.IDataset)">load</a></span>&#8203;(<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</code></th>
<td class="col-last">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This method adds a whole dataset, using INSERT to add a record at a time.</div>
</div>
</td>
</tr>
<tr class="alt-color" id="i12">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#load(java.util.ArrayList)">load</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../data/structures/IRecord.html" title="interface in io.github.ajevans.dbcode.data.structures">IRecord</a>&gt;&nbsp;records)</code></th>
<td class="col-last">
<div class="block">Adds multiple records to current database.</div>
</td>
</tr>
<tr class="row-color" id="i13">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#proveLoaded(java.lang.String,boolean)">proveLoaded</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName,
boolean&nbsp;metadataTable)</code></th>
<td class="col-last">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">Not needed for this class, but a convenient add-in for  
               proving it works without the need for unit testing or 
               database interrogation software.</div>
</div>
</td>
</tr>
<tr class="alt-color" id="i14">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#reportMessage(java.lang.String)">reportMessage</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message)</code></th>
<td class="col-last">
<div class="block">Reports message to reportingListeners.</div>
</td>
</tr>
<tr class="row-color" id="i15">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#reportProgress(int,int)">reportProgress</a></span>&#8203;(int&nbsp;progress,
int&nbsp;total)</code></th>
<td class="col-last">
<div class="block">Reports progress to reportingListeners.</div>
</td>
</tr>
<tr class="alt-color" id="i16">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#reportProgress(int,io.github.ajevans.dbcode.data.structures.IDataset)">reportProgress</a></span>&#8203;(int&nbsp;progress,
<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</code></th>
<td class="col-last">
<div class="block">Reports progress to reportingListeners.</div>
</td>
</tr>
<tr class="row-color" id="i17">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#runStatement(java.lang.String,java.lang.String,boolean)">runStatement</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sql,
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName,
boolean&nbsp;statementType)</code></th>
<td class="col-last">
<div class="block">Runs SQL statements and closes them.</div>
</td>
</tr>
<tr class="alt-color" id="i18">
<td class="col-first"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#sanitise(java.lang.String,int)">sanitise</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;string,
int&nbsp;level)</code></th>
<td class="col-last">
<div class="block">Sanitises Strings.</div>
</td>
</tr>
<tr class="row-color" id="i19">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setRecordStoreNames(java.util.ArrayList)">setRecordStoreNames</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;recordStoreNames)</code></th>
<td class="col-last">
<div class="block">Sets the record store (table) names for the store (database).</div>
</td>
</tr>
<tr class="alt-color" id="i20">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setStore(java.lang.String)">setStore</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;store)</code></th>
<td class="col-last">
<div class="block">Sets the location for the store / database.</div>
</td>
</tr>
<tr class="row-color" id="i21">
<td class="col-first"><code>private void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#storeRecords(java.util.ArrayList)">storeRecords</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../data/structures/IRecord.html" title="interface in io.github.ajevans.dbcode.data.structures">IRecord</a>&gt;&nbsp;records)</code></th>
<td class="col-last">
<div class="block">INSERTs a collection of records into the database.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="connection">
<h3>connection</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="member-name">connection</span></div>
<div class="block">Connection for SQL requests.</div>
</section>
</li>
<li>
<section class="detail" id="debug">
<h3>debug</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">debug</span></div>
<div class="block">Debugging flag, set by System variable passed in <code>-Ddebug=true</code> 
 rather than setting here / with accessor.</div>
</section>
</li>
<li>
<section class="detail" id="store">
<h3>store</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">store</span></div>
<div class="block">Path to database used.</div>
</section>
</li>
<li>
<section class="detail" id="recordStoreNames">
<h3>recordStoreNames</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="member-name">recordStoreNames</span></div>
<div class="block">Record store (table) names used.</div>
</section>
</li>
<li>
<section class="detail" id="DEF_DB_DIR">
<h3>DEF_DB_DIR</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">DEF_DB_DIR</span></div>
<div class="block">Default directory to create within store.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.DEF_DB_DIR">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEF_FILE_DIR">
<h3>DEF_FILE_DIR</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">DEF_FILE_DIR</span></div>
<div class="block">Default directory for temp files.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.DEF_FILE_DIR">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SANITISE_VIGOROUS">
<h3>SANITISE_VIGOROUS</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">SANITISE_VIGOROUS</span></div>
<div class="block">Constant for aggresive sanitisation.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.SANITISE_VIGOROUS">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SANITISE_NAME">
<h3>SANITISE_NAME</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">SANITISE_NAME</span></div>
<div class="block">Constant for database object name sanitisation.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.SANITISE_NAME">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SANITISE_WEAK">
<h3>SANITISE_WEAK</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">SANITISE_WEAK</span></div>
<div class="block">Constant for weak sanitisation to remove a few problematic chars.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.SANITISE_WEAK">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="INSERT_SMT">
<h3>INSERT_SMT</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">INSERT_SMT</span></div>
<div class="block">Constant for sql statement running.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.INSERT_SMT">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="CREATE_SMT">
<h3>CREATE_SMT</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">CREATE_SMT</span></div>
<div class="block">Constant for sql statement running.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.CREATE_SMT">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="METADATA_TABLE">
<h3>METADATA_TABLE</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">METADATA_TABLE</span></div>
<div class="block">Constant proveLoaded.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.METADATA_TABLE">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="NORMAL_TABLE">
<h3>NORMAL_TABLE</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">NORMAL_TABLE</span></div>
<div class="block">Constant proveLoaded.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../../constant-values.html#io.github.ajevans.dbcode.dbconsumers.DerbyConsumer.NORMAL_TABLE">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="progress">
<h3>progress</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">progress</span></div>
<div class="block">Used for progress monitoring.</div>
</section>
</li>
<li>
<section class="detail" id="reportingListeners">
<h3>reportingListeners</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../utilities/IReportingListener.html" title="interface in io.github.ajevans.dbcode.utilities">IReportingListener</a>&gt;</span>&nbsp;<span class="member-name">reportingListeners</span></div>
<div class="block">Listeners interested in updates on progress.</div>
</section>
</li>
<li>
<section class="detail" id="chunkRecordsBy">
<h3>chunkRecordsBy</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">chunkRecordsBy</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">See <code>load(IDataset dataset)</code> docs for details of 
 deprecation.</div>
</div>
<div class="block">Used in memory management. 
 Pushing an entire dataset to Derby via INSERTs risks the database 
 holding very large data structures in memory, so we 
 chunk it up where this is the case. This would increase processing time, 
 but there's a time gain from not hitting memory limits; 
 profiling suggests an optimal at ~2000 records for a 8Gb PC, 
 but with a wide enough optimal range that there is little 
 point in, e.g. setting this in-run using a greedy algorithm.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="#load(io.github.ajevans.dbcode.data.structures.IDataset)"><code>load(IDataset dataset)</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DerbyConsumer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">DerbyConsumer</span>()</div>
<div class="block">Default constructor.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="initialise(io.github.ajevans.dbcode.data.structures.IDataset)">
<h3>initialise</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">initialise</span>&#8203;(<span class="parameters"><a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</span>
                throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Sets up the data store (database and tables).
 <p>
 If a store (database) path and/or record store (table) names haven't been 
 set using the <code>setSource</code> / <code>setRecordStoreNames</code> 
 methods, this method deals with this. It pulls the titles from the dataset 
 passed in for database name and from the dataset record holders for table 
 names. The default location for the database is a directory within 
 the user's home directory (see class docs). 
 All names and paths are sanitised.
 <p>
 It then creates the relevant database and tables, or connects to the 
 database if it already exists. The connection remains until 
 <code>disconnectStore</code> called.
 <p>
 To reset objects of this class, be sure to call <code>setStore</code>
 and then <code>initialise</code> - just calling <code>initialise</code> 
 will result in recursion of the store directories.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#initialise(io.github.ajevans.dbcode.data.structures.IDataset)">initialise</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>dataset</code> - Dataset to store - note that this need 
                            not be filled with records as long as it 
                            has recordHolders, metadata, and field data.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If issues arise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildTable(io.github.ajevans.dbcode.data.structures.IDataset,int)">
<h3>buildTable</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">buildTable</span>&#8203;(<span class="parameters"><a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset,
int&nbsp;index)</span>
                 throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Sets up the relevant database table.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataset</code> - The dataset containing the table to be built.
                        Record holders can be empty of data at this point,  
                        but must contain field information and metadata.</dd>
<dd><code>index</code> - The index of the table to build in 
                        <code>recordStoreNames</code>.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If there's an issue creating table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildMetadataTable(io.github.ajevans.dbcode.data.structures.IMetadata,java.lang.String)">
<h3>buildMetadataTable</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">buildMetadataTable</span>&#8203;(<span class="parameters"><a href="../data/structures/IMetadata.html" title="interface in io.github.ajevans.dbcode.data.structures">IMetadata</a>&nbsp;metadata,
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;metadataTableName)</span>
                         throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Sets up a metadata table for each table.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>metadata</code> - The metadata to be written to the metadata 
                                 table.</dd>
<dd><code>metadataTableName</code> - The name of the metadata table.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If there's an issue making table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="bulkLoad(io.github.ajevans.dbcode.data.structures.IDataset)">
<h3>bulkLoad</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">bulkLoad</span>&#8203;(<span class="parameters"><a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</span>
              throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">This method bulk-loads a whole dataset into the database the quickest 
 (but memory hungry) way possible - via a CSV file.
 <p>
 It will attempt to write the dataset as one or more temp files to the 
 user's home space, and then load the files into the database. 
 For a file of 60000 records, this is an order of magnitude 
 faster than loading by INSERTs, but it does require write access. 
 <code>initialise</code> must have been called first to prepare the database.
 <p>
 This method calls <code>disconnectStore</code> when done to clean up 
 and garbage collect.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#bulkLoad(io.github.ajevans.dbcode.data.structures.IDataset)">bulkLoad</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>dataset</code> - The dataset to load.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If there is an issue loading.</dd>
<dt>To Do:</dt>
<dd>Remove code that proves table filled. This is just for this 
            specific application.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="load(java.util.ArrayList)">
<h3>load</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">load</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../data/structures/IRecord.html" title="interface in io.github.ajevans.dbcode.data.structures">IRecord</a>&gt;&nbsp;records)</span>
          throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Adds multiple records to current database.
 <p>
 This little at the moment than call <code>storeRecords</code> with 
 the records, but we keep it as a separate method as it acts as a gateway 
 for data in the supplier/consumer push model and we may want to add 
 functionality to the gateway in the future.
 <p>
 Users of the push model should call <code>disconnectStore</code> 
 when done, as the consumer keeps the connection open under this model.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#load(java.util.ArrayList)">load</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>records</code> - ArrayList of records.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - Only if there is an issue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="storeRecords(java.util.ArrayList)">
<h3>storeRecords</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">storeRecords</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../data/structures/IRecord.html" title="interface in io.github.ajevans.dbcode.data.structures">IRecord</a>&gt;&nbsp;records)</span>
                   throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">INSERTs a collection of records into the database. 
 <p>
 This is very slow compared with bulk loading, 
 but used judiciously can use less memory. A 60,000 
 4-value records file loaded 120 records at a time used 10% of the memory 
 of bulk-loading, but took an order of magnitude more time (30 mins).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>records</code> - ArrayList of records to write.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - Only if there is an issue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setStore(java.lang.String)">
<h3>setStore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">setStore</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;store)</span>
              throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Sets the location for the store / database. 
 <p>
 If not set the parameters can be set from the dataset 
 via the <code>initialise</code> method.
 <p>
 Sanitises input with SANITISE_WEAK.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#setStore(java.lang.String)">setStore</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>store</code> - File path of database to connect to.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - Not used in this implementation.</dd>
<dt>See Also:</dt>
<dd><a href="#initialise(io.github.ajevans.dbcode.data.structures.IDataset)"><code>initialise(IDataset dataset)</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStore()">
<h3>getStore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">getStore</span>()</div>
<div class="block">Gets the location for the store / database. 
 <p>
 For testing.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>String      Store location.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRecordStoreNames(java.util.ArrayList)">
<h3>setRecordStoreNames</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">setRecordStoreNames</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;recordStoreNames)</span>
                         throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Sets the record store (table) names for the store (database). 
 <p>
 If not set the parameters can be set from the dataset 
 via the <code>initialise</code> method. 
 <p>
 Sanitises input with SANITISE_NAME.
 <p>
 If set here directly (for example, the user 
 enters the name/s) it's the implementers responsibility to make sure 
 the number of record stores named and number supplied in the dataset 
 to <code>initialise</code> match up or <code>initialise</code>
 will throw an exception.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#setRecordStoreNames(java.util.ArrayList)">setRecordStoreNames</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>recordStoreNames</code> - Names of record stores (tables) to make.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - Not used in this implementation.</dd>
<dt>See Also:</dt>
<dd><a href="#initialise(io.github.ajevans.dbcode.data.structures.IDataset)"><code>initialise(IDataset dataset)</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRecordStoreNames()">
<h3>getRecordStoreNames</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="member-name">getRecordStoreNames</span>()</div>
<div class="block">Gets the record store names. 
 <p>
 For testing.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>ArrayList   Record store names.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addReportingListener(io.github.ajevans.dbcode.utilities.IReportingListener)">
<h3>addReportingListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">addReportingListener</span>&#8203;(<span class="parameters"><a href="../utilities/IReportingListener.html" title="interface in io.github.ajevans.dbcode.utilities">IReportingListener</a>&nbsp;reportingListener)</span></div>
<div class="block">For objects wishing to get progress reports on data reading.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#addReportingListener(io.github.ajevans.dbcode.utilities.IReportingListener)">addReportingListener</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>reportingListener</code> - Object wishing to gain reports.</dd>
<dt>See Also:</dt>
<dd><a href="../utilities/IReportingListener.html" title="interface in io.github.ajevans.dbcode.utilities"><code>IReportingListener</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findTitle(io.github.ajevans.dbcode.data.structures.IMetadata)">
<h3>findTitle</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">findTitle</span>&#8203;(<span class="parameters"><a href="../data/structures/IMetadata.html" title="interface in io.github.ajevans.dbcode.data.structures">IMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Finds the title category in an unknown IMetadata object. 
 <p>
 If it doesn't exist, defaults to "DEFAULT".</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>metadata</code> - Metadata object of unknown schema.</dd>
<dt>Returns:</dt>
<dd>String        Title, if found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="connectStore()">
<h3>connectStore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">connectStore</span>()
                  throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Connects to current store / database.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#connectStore()">connectStore</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If there is an issue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="disconnectStore()">
<h3>disconnectStore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">disconnectStore</span>()
                     throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Disconnects from current store / database and garbage collects.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#disconnectStore()">disconnectStore</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - Not thrown in this implementation.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runStatement(java.lang.String,java.lang.String,boolean)">
<h3>runStatement</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">runStatement</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sql,
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName,
boolean&nbsp;statementType)</span>
                   throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="block">Runs SQL statements and closes them.
 <p>
 If the statement requires creation the method will try to connect 
 to the table, and if it exists it will DROP it and rebuild.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sql</code> - The SQL statement.</dd>
<dd><code>tableName</code> - The table involved; this is for reporting, not 
                         action as the table should be in the SQL if needed.</dd>
<dd><code>statementType</code> - For clarity, use INSERT_SMT or CREATE_SMT.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If there's an issue.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="sanitise(java.lang.String,int)">
<h3>sanitise</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">sanitise</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;string,
int&nbsp;level)</span></div>
<div class="block">Sanitises Strings.
 <p>
 Vigorous sanitisation removes all non-alphanumeric characters in the 
 range <code>a-z</code>, <code>A-Z</code>, <code>0-9</code>, commas, 
 spaces and tabs. 
 <p>
 Weak sanitisation removes characters likely to be problematic in databases 
 (<code>" ' ; () =</code>).
 <p>
 Name sanitisation sanitises Strings to potential database object names 
 fairly aggresively (removes spaces, capitalises, makes sure it starts 
 with a alphabetic character and not "ii", removes all but 0 through 9, 
 #, @, and $, and makes sure they're 256 or less bytes*).
 <p>
 *Assumes Java-like representation, i.e. two bytes per char.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>string</code> - String to sanitise.</dd>
<dd><code>level</code> - One of SANITISE_VIGOROUS, SANITISE_WEAK, SANITISE_NAME.</dd>
<dt>Returns:</dt>
<dd>String    Sanitised String.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="gapFillLocalisedGUIText()">
<h3>gapFillLocalisedGUIText</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">gapFillLocalisedGUIText</span>()</div>
<div class="block">Sets the defaults for warnings and exceptions in English if an appropriate 
 language properties file is missing.</div>
</section>
</li>
<li>
<section class="detail" id="reportProgress(int,io.github.ajevans.dbcode.data.structures.IDataset)">
<h3>reportProgress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">reportProgress</span>&#8203;(<span class="parameters">int&nbsp;progress,
<a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</span></div>
<div class="block">Reports progress to reportingListeners.
 <p>
 Reports if progress is a multiple of total records / 100. 
 If progress is zero or less, reports progress as 0 of 1.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>progress</code> - Progress in record processing.</dd>
<dd><code>dataset</code> - Dataset to extract estimate of processing 
                               to be done.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reportProgress(int,int)">
<h3>reportProgress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">reportProgress</span>&#8203;(<span class="parameters">int&nbsp;progress,
int&nbsp;total)</span></div>
<div class="block">Reports progress to reportingListeners.
 <p>
 Reports for an arbitrary progress and total worked towards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>progress</code> - Value indicating progress through work total.</dd>
<dd><code>total</code> - Value indicating total work to do.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reportMessage(java.lang.String)">
<h3>reportMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">reportMessage</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message)</span></div>
<div class="block">Reports message to reportingListeners.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - Message to reporting listeners.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="load(io.github.ajevans.dbcode.data.structures.IDataset)">
<h3>load</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">load</span>&#8203;(<span class="parameters"><a href="../data/structures/IDataset.html" title="interface in io.github.ajevans.dbcode.data.structures">IDataset</a>&nbsp;dataset)</span>
          throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This method adds a whole dataset, using INSERT to add a record at a time. 
 While it chunks the dataset into blocks to reduce memory 
 use on the database side, it is still memory heavy and 
 an order of magnitude slower than <code>bulkLoad</code>.</div>
</div>
<div class="block">This method was an early element of the data consumer built on top of 
 the line-by-line reader to test the whole dataset, and INSERTs a 
 whole dataset a line at a time. 
 <p>
 It is both memory heavy and slow. The only reason for having it here 
 is that it is imaginable that some uses might want to avoid writing 
 the temp file/s needed for bulk loading.
 <p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../data/io/IDataConsumer.html#load(io.github.ajevans.dbcode.data.structures.IDataset)">load</a></code>&nbsp;in interface&nbsp;<code><a href="../data/io/IDataConsumer.html" title="interface in io.github.ajevans.dbcode.data.io">IDataConsumer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>dataset</code> - Dataset of data.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If is there is an issue.</dd>
<dt>See Also:</dt>
<dd><a href="../data/io/IDataConsumer.html#load(java.util.ArrayList)"><code>IDataConsumer.load(ArrayList&lt;IRecord&gt; records)</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="proveLoaded(java.lang.String,boolean)">
<h3>proveLoaded</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">proveLoaded</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName,
boolean&nbsp;metadataTable)</span>
                  throws <span class="exceptions"><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">Not needed for this class, but a convenient add-in for  
               proving it works without the need for unit testing or 
               database interrogation software.</div>
</div>
<div class="block">Messages out to ReportingListeners the first and last entries in the named 
 table.
 <p>
 Will disconnect and connect to current store to prove persistence.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tableName</code> - Table to use.</dd>
<dd><code>metadataTable</code> - One of METADATA_TABLE or NORMAL_TABLE.</dd>
<dt>Throws:</dt>
<dd><code><a href="DBCreationException.html" title="class in io.github.ajevans.dbcode.dbconsumers">DBCreationException</a></code> - If an issue with connecting.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/DerbyConsumer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright &#169; 2021. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
